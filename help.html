<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Змеи</title>

<style type="text/css">

body {
	background-color: #9cf; color: #000;
	font-family: Verdana, sans-serif; font-size: 80%; line-height: 2em;
}
#content {
	background-color: #fff; max-width: 50em; margin: auto; border: 2px solid #000; padding: 2em;
}
a[href] { color: #369; font-weight: bold; text-decoration: underline; }
h1 { font-size: 130%; }
h2 { font-size: 120%; }
p { text-indent: 2em; }
#toc { list-style-type: none; }
.fig { text-align: center; text-indent: 0px; }

</style>
</head>

<body>
<div id="content">

<h1>Змеи</h1>
<p>Справка по web-клиенту (<a href="http://github.com/ava12/snakes-server">репозиторий</a>, <a href="http://forum.sources.ru/index.php?showtopic=364496">тема на форуме</a>) для игры <a href="http://wiki.sources.ru/doku.php?id=projects:snakes">&laquo;Змеи&raquo;</a>.</p>

<ul id="toc">
<li><a href="#what">Что и как</a></li>
<li><a href="#edit">Редактирование змеи</a></li>
<li><a href="#fight">Расчет и просмотр боя</a></li>
<li><a href="#rating">Расчет рейтинга</a></li>
</ul>


<h2><a name="what">Что и как</a></h2>

<p>Прежде чем <a href="game">играть</a>, необходимо <a href="register">зарегистрироваться</a> на сервере. (Это временная мера, позже будет реализована единая с форумом авторизация). Если ваш логин на сервере не совпадает с логином на форуме, то желательно при регистрации указать свой форумный логин.

<p>Выглядит клиент довольно примитивно, для его улучшения (или создания другого клиента) потребуется помощь форумчан. В первую очередь нужен набор нормальных шкур для змей.

<p>Чтобы &laquo;примерить&raquo; шкуру на змею в движении, можно воспользоваться <a href="view-skin.html">утилитой</a>. Шкура представляет собой изображение размером 80&times;64 пикселя (5&times;4 клетки). Каждый ряд соответствует направлению (вверх, вправо, вниз, влево), каждый столбец - элементу (голова, тело, изгиб вправо, изгиб влево, хвост). Пример:

<p class="fig"><img src="img/16/skin1.png" alt=""></p>

<p>Для упрощения работы со шкурами можно также использовать изображения размером 32&times;64 пикселя со змеей, состоящей из пяти сегментов: в левом верхнем углу голова, смотрящая вверх, затем изгиб вправо, изгиб влево, тело и хвост. В этом случае утилита сама сгенерирует шкуру на основе этого изображения. Пример:

<p class="fig"><img src="img/16/s1.png" alt=""></p>


<h2><a name="edit">Редактирование змеи</a></h2>

<p>Клик по подсвеченной кнопке в нижней части редактора снимает подсветку. Кнопки шаблонов/наборов, групп и модификатора &laquo;НЕ&raquo; могут быть подсвечены независимо. При редактировании карты можно менять либо шаблон/набор, содержащийся в клетке, либо группу, либо и то, и другое. Если выбран только шаблон/набор, то при клике на чистой клетке карты автоматически назначается первая И-группа. Модификатор &laquo;НЕ&raquo; ставится или снимается (в зависимости от состояния кнопки) всегда.


<h2><a name="fight">Расчет и просмотр боя</a></h2>

<p>Одновременно может рассчитываться только один бой для каждого &laquo;заказчика&raquo;. Расчет выполняется при получении запроса на создание боя или получения информации о бое. Время расчета в рамках одного запроса ограничено несколькимим секундами (промежуточные результаты сохраняются), так что от клиента может потребоваться несколько последовательных запросов. Web-клиент при запуске проверяет, есть ли незавершенный бой, и если да, то посылает серверу запросы на расчет и блокирует прочие действия игрока до его завершения.

<p>При просмотре боя игрок может выбрать змею для отладки (выбрать можно либо свою змею, либо бота). По умолчанию ни одна змея не выбрана. Если змея выбрана, то на каждом ходу отображается ситуация перед шагом этой змеи (если змея не выбрана, показывается ситуация перед первым шагом хода). По окончании боя показывается ситуация после последнего шага последнего хода.


<h2><a name="rating">Расчет рейтинга</a></h2>

<p>Формула расчета рейтингов игроков временная, в будущем она, возможно, изменится, и рейтинги будут сброшены.

<p>Когда игрок впервые назначает бойца, его рейтинг равен нулю. После рейтингового боя для бойцов высчитываются ожидаемые рейтинги, и каждому бойцу присваивается среднее арифметическое между его текущим и ожидаемым рейтингом. Ожидаемый рейтинг равен 100&nbsp;+&nbsp;длина&times;10&nbsp;&minus;&nbsp;сумма_текущих_рейтингов/4. Если ожидаемый рейтинг больше текущего, он округляется вверх, если меньше, то округляется вниз.

</div>
</body>
</html>
